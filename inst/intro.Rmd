The goal of r2dii.plot is to help you plot 2DII data in an informative,
beautiful, and easy way.

## Installation

You can install the development version of r2dii.plot from
[GitHub](https://github.com/2DegreesInvesting/r2dii.plot) with:

```r
# install.packages("devtools")
devtools::install_github("2DegreesInvesting/r2dii.plot")
```

## Example

The r2dii.plot package is designed to work smoothly with other "r2dii" packages
-- [r2dii.data](https://2degreesinvesting.github.io/r2dii.data/),
[r2dii.match](https://2degreesinvesting.github.io/r2dii.match/), and
[r2dii.analysis](https://2degreesinvesting.github.io/r2dii.analysis/). It also
plays well with the popular packages [dplyr](https://www.tidyverse.org/) and
[ggplot2](https://ggplot2.tidyverse.org/), which help you prepare your data and
customize your plots.

```{r setup}
library(dplyr, warn.conflicts = FALSE)
library(ggplot2, warn.conflicts = FALSE)
library(r2dii.plot)
```

Your data typically comes from the output of two functions in the r2dii.analysis
package:
[`target_sda()`](https://2degreesinvesting.github.io/r2dii.analysis/reference/target_sda.html)
and
[`target_market_share()`](https://2degreesinvesting.github.io/r2dii.analysis/reference/target_market_share.html).
Here you'll use two example datasets that come with r2dii.plot.

```{r}
sda

market_share
```

r2dii.plot supports three kinds of plots -- timeline, techmix, and trajectory.
Each plot has specific requirements for the first argument `data`. To meet those
requirements we currently provide two experimental sets of functions
([API](https://en.wikipedia.org/wiki/API)s) -- X and Y.

Both APIs can help you get the same plots. The difference is not in what you can
do but in how you can do it:

* The X API has a simpler interface. It focuses exclusively on the tasks you
can't easily achieve with other packages, and assumes you can meet the `data`
requirements and customize your plots with other packages such as base R, dplyr,
and ggplot2. It forces you to learn or reuse your existing knowledge of other R
packages and workflows.

* The Y API has a more complex but complete toolkit. It offers more functions
and arguments that wrap features from other packages to help you meet the `data`
requirements and customize your plots directly with r2dii.plot. and ggplot2. It
forces you to learn the new r2dii.plot way of doing things but requires little
knowledge of other packages and workflows.

These tables summarize the differences for users and developers of r2dii.plot:

```{r echo=FALSE}
users_caption <- "_The X and Y APIs compared from a user's perspective._"
users <- tibble::tribble(
  ~"", ~`X API`, ~`Y API`,
  "Interface", 
  "Simpler", 
  "More complex",
  
  "Meet `data` requirements", 
  "With other packages", 
  "With r2dii.plot and optionally other packages",
  
  "Customize plots", 
  "With other packages", 
  "With r2dii.plot and optionally other packages",
  
  "Integrates with other R packages and workflows", 
  "More", 
  "Less",
)
knitr::kable(users, caption = users_caption)

devs_caption <- "_The X and Y APIs compared from a developer's perspective._"
devs <- tibble::tribble(
  ~"", ~`X API`, ~`Y API`,
  "Easy to maintain", 
  "Less", 
  "More",
  
  "Easy to extend", 
  "More", 
  "Less",
)
knitr::kable(devs, caption = devs_caption)
```

To make the comparison concrete consider this small example of a trajectory plot
(the other plot types you can find in the detailed [X
API](https://2degreesinvesting.github.io/r2dii.plot/articles/articles/r2dii-plot-X.html)
and [Y
API](https://2degreesinvesting.github.io/r2dii.plot/articles/articles/r2dii-plot-Y.html))
articles. Notice the resulting plot is almost the same (except for the labels)
but the toolkit is different.

* X API

```{r}
data <- market_share

prep <- filter(
  data,
  sector == "power",
  technology == "renewablescap",
  region == "global",
  scenario_source == "demo_2020",
  year <= 2025
)

plot_trajectoryX(prep) + 
  labs (title = "Trajectory plot with the thin 'X' API")
```

* Y API

```{r}
data <- market_share

prep <- prep_trajectoryY(
  data,
  sector_filter = "power",
  technology_filter = "renewablescap",
  region_filter = "global",
  scenario_source_filter = "demo_2020",
  value = "production"
)

scenario_specs <- dplyr::tibble(
  scenario = c("sds", "sps", "cps"),
  label = c("SDS", "STEPS", "CPS")
)

main_line_metric <- dplyr::tibble(metric = "projected", label = "Portfolio")

additional_line_metrics <- dplyr::tibble(
  metric = "corporate_economy",
  label = "Corporate Economy"
)

plot_trajectoryY(
  prep,
  scenario_specs_good_to_bad = scenario_specs,
  main_line_metric = main_line_metric,
  additional_line_metrics = additional_line_metrics
) + 
  labs (title = "Trajectory plot with the thick 'Y' API")
```

For full examples see the dedicated articles [r2dii.plot
X](https://2degreesinvesting.github.io/r2dii.plot/articles/articles/r2dii-plot-X.html)
and [r2dii.plot
Y](https://2degreesinvesting.github.io/r2dii.plot/articles/articles/r2dii-plot-Y.html).
